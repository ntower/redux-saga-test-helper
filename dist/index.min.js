"use strict";function _isPlaceholder(n){return null!=n&&"object"==typeof n&&!0===n["@@functional/placeholder"]}Object.defineProperty(exports,"__esModule",{value:!0});var _isPlaceholder_1=_isPlaceholder;function _curry1(r){return function n(e){return 0===arguments.length||_isPlaceholder_1(e)?n:r.apply(this,arguments)}}var _curry1_1=_curry1;function _curry2(t){return function n(e,r){switch(arguments.length){case 0:return n;case 1:return _isPlaceholder_1(e)?n:_curry1_1(function(n){return t(e,n)});default:return _isPlaceholder_1(e)&&_isPlaceholder_1(r)?n:_isPlaceholder_1(e)?_curry1_1(function(n){return t(n,r)}):_isPlaceholder_1(r)?_curry1_1(function(n){return t(e,n)}):t(e,r)}}}var _curry2_1=_curry2;function _arrayFromIterator(n){for(var e,r=[];!(e=n.next()).done;)r.push(e.value);return r}var _arrayFromIterator_1=_arrayFromIterator;function _containsWith(n,e,r){for(var t=0,o=r.length;t<o;){if(n(e,r[t]))return!0;t+=1}return!1}var _containsWith_1=_containsWith;function _functionName(n){var e=String(n).match(/^function (\w*)/);return null==e?"":e[1]}var _functionName_1=_functionName;function _has(n,e){return Object.prototype.hasOwnProperty.call(e,n)}var _has_1=_has,identical=_curry2_1(function(n,e){return n===e?0!==n||1/n==1/e:n!=n&&e!=e}),identical_1=identical,toString=Object.prototype.toString,_isArguments=function(){return"[object Arguments]"===toString.call(arguments)?function(n){return"[object Arguments]"===toString.call(n)}:function(n){return _has_1("callee",n)}},_isArguments_1=_isArguments,hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],hasArgsEnumBug=function(){return arguments.propertyIsEnumerable("length")}(),contains=function(n,e){for(var r=0;r<n.length;){if(n[r]===e)return!0;r+=1}return!1},_keys="function"!=typeof Object.keys||hasArgsEnumBug?function(n){if(Object(n)!==n)return[];var e,r,t=[],o=hasArgsEnumBug&&_isArguments_1(n);for(e in n)!_has_1(e,n)||o&&"length"===e||(t[t.length]=e);if(hasEnumBug)for(r=nonEnumerableProps.length-1;0<=r;)e=nonEnumerableProps[r],_has_1(e,n)&&!contains(t,e)&&(t[t.length]=e),r-=1;return t}:function(n){return Object(n)!==n?[]:Object.keys(n)},keys=_curry1_1(_keys),keys_1=keys,type=_curry1_1(function(n){return null===n?"Null":void 0===n?"Undefined":Object.prototype.toString.call(n).slice(8,-1)}),type_1=type;function _uniqContentEquals(n,e,r,t){var o=_arrayFromIterator_1(n),a=_arrayFromIterator_1(e);function u(n,e){return _equals(n,e,r.slice(),t.slice())}return!_containsWith_1(function(n,e){return!_containsWith_1(u,e,n)},a,o)}function _equals(n,e,r,t){if(identical_1(n,e))return!0;var o=type_1(n);if(o!==type_1(e))return!1;if(null==n||null==e)return!1;if("function"==typeof n["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](n);if("function"==typeof n.equals||"function"==typeof e.equals)return"function"==typeof n.equals&&n.equals(e)&&"function"==typeof e.equals&&e.equals(n);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof n.constructor&&"Promise"===_functionName_1(n.constructor))return n===e;break;case"Boolean":case"Number":case"String":if(typeof n!=typeof e||!identical_1(n.valueOf(),e.valueOf()))return!1;break;case"Date":if(!identical_1(n.valueOf(),e.valueOf()))return!1;break;case"Error":return n.name===e.name&&n.message===e.message;case"RegExp":if(n.source!==e.source||n.global!==e.global||n.ignoreCase!==e.ignoreCase||n.multiline!==e.multiline||n.sticky!==e.sticky||n.unicode!==e.unicode)return!1}for(var a=r.length-1;0<=a;){if(r[a]===n)return t[a]===e;a-=1}switch(o){case"Map":return n.size===e.size&&_uniqContentEquals(n.entries(),e.entries(),r.concat([n]),t.concat([e]));case"Set":return n.size===e.size&&_uniqContentEquals(n.values(),e.values(),r.concat([n]),t.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u=keys_1(n);if(u.length!==keys_1(e).length)return!1;var i=r.concat([n]),c=t.concat([e]);for(a=u.length-1;0<=a;){var s=u[a];if(!_has_1(s,e)||!_equals(e[s],n[s],i,c))return!1;a-=1}return!0}var _equals_1=_equals,equals=_curry2_1(function(n,e){return _equals_1(n,e,[],[])}),equals_1=equals,logPrefix="[rsth]: ",colorInfo="[37m",colorWarning="'[33m%s[0m'",colorError="[41m",logInfo=function(){for(var n,e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return(n=console).log.apply(n,[colorInfo,logPrefix].concat(r))},logWarning=function(){for(var n,e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return(n=console).log.apply(n,[colorWarning,logPrefix].concat(r))},logError=function(){for(var n,e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return(n=console).log.apply(n,[colorError,logPrefix].concat(r))};function runUntil(n,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],t=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};if(void 0===e)return runUntil.bind(null,n);var o=t.debug,a=void 0!==o&&o,u=t.silent,i=void 0!==u&&u;r=r||[];var c="function"==typeof e?e():e;if(!c||"function"!=typeof c.next)return i||logError("Requires an iterator or generator to work. Received:",e&&e.toString&&e.toString()),[];if(a&&!i&&logInfo("VVV Starting VVV"),!i){var s=[];r.forEach(function(n,e){n.getResponsesRemaining()<=0&&s.push(e)});var l=s.length;0<l&&logWarning("".concat(l," mock").concat(1===l?"":"s",' were already used up before the test started.\n  This may mean you are trying to reuse mocks between tests.\n  "when" mocks are one-time use. Either make new mocks for each test, or use "whenever".\n  ').concat(s.map(function(n){return"at index ".concat(n,": ").concat(r[n].toString())}).join("\n")))}for(var f=[],h=c.next();!h.done;){if(f.push(h.value),n(h.value,f)){a&&!i&&logInfo("Reached break condition before the saga could return. Stopping iteration.");break}var g=r.find(function(n){return n._match(h.value,f)});if(g){if(!(h=g._execute(c)))return i||logError("Got no iterator result. If you are implementing a custom .then, make sure to return the result."),f}else h=c.next()}if(!i){var _=[];r.forEach(function(n,e){n.hasResponded()||_.push(e)});var y=_.length;0<y&&logWarning("".concat(y," mock").concat(1===y?"":"s"," never matched any yielded value\n  ").concat(_.map(function(n){return"at index ".concat(n,": ").concat(r[n].toString())}).join("\n")))}return a&&!i&&logInfo("^^^ Stopping ^^^"),f}var runUntilCompletion=runUntil(function(){return!1}),cutoff=1e3,run=runUntil(function(n,e){if(e.length>cutoff)throw new Error("Generator did not terminate after ".concat(cutoff," yields. You may have an infinite loop.\nIf you need to run longer, use runUntilCompletion to run forever or runUntil to specify custom logic."));return!1});function createMock(r,t){var o;o="function"==typeof t?t:equals_1(t);var a=[],u=0;return{toString:function(){var n,e=r?"when":"whenever";return"function"==typeof t?n="[custom matcher]":t["@@redux-saga/IO"]&&(n=t.type+" effect"),"".concat(e,"(").concat(n,")")+a.map(function(n){return n.toString()}).join("")},getResponseCount:function(){return u},getResponsesRemaining:function(){return r?a.length-u:1/0},hasResponded:function(){return 0<u},_match:function(n,e){return 0<a.length&&o(n,e)},_execute:function(n){u++;var e=a[0];return r&&a.shift(),e(n)},respond:function(n){return a.push(n),!r&&1<a.length&&logWarning('Chaining multiple responses onto a "whenever" mock has no effect. The first response will be used forever.\n\nYou can chain multiple responses onto a when, with each response occuring at most once:\nwhen(call(someFunction))\n  .throw("first time fails")\n  .next("second time succeeds");\n  // third and later, the mock does nothing. The saga resumes with undefined\n\nIf you need more control you can use whenever with a custom .respond:\nlet count = 0;\nwhenever(call(someFunction))\n  .respond(iterator => {\n    count++;\n    if (count === 1) {\n      return iterator.throw("first time fails");\n    }\n    return iterator.next("all other times succeed");\n  })'),this},next:function(e){var n=function(n){return n.next(e)};return n.toString=function(){return".next(".concat(e&&e.toString&&e.toString(),")")},this.respond(n)},throw:function(e){var n=function(n){return n.throw(e)};return n.toString=function(){return".throw(".concat(e&&e.toString&&e.toString(),")")},this.respond(n)},return:function(e){var n=function(n){return n.return(e)};return n.toString=function(){return".return(".concat(e&&e.toString&&e.toString(),")")},this.respond(n)}}}var when=function(n){return createMock(!0,n)},whenever=function(n){return createMock(!1,n)};exports.run=run,exports.runUntil=runUntil,exports.runUntilCompletion=runUntilCompletion,exports.when=when,exports.whenever=whenever;
